"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{64317:function(ie,N,a){var M=a(1413),$=a(91),K=a(22270),F=a(67294),V=a(66758),p=a(80209),G=a(85893),A=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],J=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],T=F.forwardRef(function(o,O){var Z=o.fieldProps,g=o.children,b=o.params,m=o.proFieldProps,C=o.mode,e=o.valueEnum,w=o.request,B=o.showSearch,R=o.options,I=(0,$.Z)(o,A),t=(0,F.useContext)(V.Z);return(0,G.jsx)(p.Z,(0,M.Z)((0,M.Z)({valueEnum:(0,K.h)(e),request:w,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({options:R,mode:C,showSearch:B,getPopupContainer:t.getPopupContainer},Z),ref:O,proFieldProps:m},I),{},{children:g}))}),y=F.forwardRef(function(o,O){var Z=o.fieldProps,g=o.children,b=o.params,m=o.proFieldProps,C=o.mode,e=o.valueEnum,w=o.request,B=o.options,R=(0,$.Z)(o,J),I=(0,M.Z)({options:B,mode:C||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Z),t=(0,F.useContext)(V.Z);return(0,G.jsx)(p.Z,(0,M.Z)((0,M.Z)({valueEnum:(0,K.h)(e),request:w,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({getPopupContainer:t.getPopupContainer},I),ref:O,proFieldProps:m},R),{},{children:g}))}),Q=T,X=y,L=Q;L.SearchSelect=X,L.displayName="ProFormComponent",N.Z=L},83229:function(ie,N,a){a.r(N),a.d(N,{default:function(){return Ae}});var M=a(13769),$=a.n(M),K=a(5574),F=a.n(K),V=a(15009),p=a.n(V),G=a(97857),A=a.n(G),J=a(99289),T=a.n(J),y=a(2618),Q=a(51042),X=a(18814),L=a(91060),o=a(2236),O=a(37476),Z=a(5966),g=a(1413),b=a(91),m=a(67294),C=a(80209),e=a(85893),w=["fieldProps","proFieldProps"],B=function(l,s){var u=l.fieldProps,f=l.proFieldProps,r=(0,b.Z)(l,w);return(0,e.jsx)(C.Z,(0,g.Z)({ref:s,valueType:"textarea",fieldProps:u,proFieldProps:f},r))},R=m.forwardRef(B),I=a(7658),t=a(80854),x=a(2453),pe=a(96365),k=a(71577),ce=a(85265),z=a(62113),q=a(64317),me=a(22270),ee=a(78045),fe=a(90789),he=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],ge=m.forwardRef(function(n,l){var s=n.fieldProps,u=n.options,f=n.radioType,r=n.layout,S=n.proFieldProps,_=n.valueEnum,W=(0,b.Z)(n,he);return(0,e.jsx)(C.Z,(0,g.Z)((0,g.Z)({valueType:f==="button"?"radioButton":"radio",ref:l,valueEnum:(0,me.h)(_,void 0)},W),{},{fieldProps:(0,g.Z)({options:u,layout:r},s),proFieldProps:S,filedConfig:{customLightMode:!0}}))}),ve=m.forwardRef(function(n,l){var s=n.fieldProps,u=n.children;return(0,e.jsx)(ee.ZP,(0,g.Z)((0,g.Z)({},s),{},{ref:l,children:u}))}),Fe=(0,fe.G)(ve,{valuePropName:"checked",ignoreWidth:!0}),Y=Fe;Y.Group=ge,Y.Button=ee.ZP.Button,Y.displayName="ProFormComponent";var Pe=Y,Me=a(66758),Te=["fieldProps","proFieldProps"],ae="dateTime",xe=m.forwardRef(function(n,l){var s=n.fieldProps,u=n.proFieldProps,f=(0,b.Z)(n,Te),r=(0,m.useContext)(Me.Z);return(0,e.jsx)(C.Z,(0,g.Z)({ref:l,fieldProps:(0,g.Z)({getPopupContainer:r.getPopupContainer},s),valueType:ae,proFieldProps:u,filedConfig:{valueType:ae,customLightMode:!0}},f))}),je=xe,be=a(69400),Ce=function(l){var s=(0,t.useIntl)();return(0,e.jsxs)(z.L,{stepsProps:{size:"small"},stepsFormRender:function(f,r){return(0,e.jsx)(be.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:s.formatMessage({id:"pages.searchTable.updateForm.ruleConfig",defaultMessage:"\u89C4\u5219\u914D\u7F6E"}),open:l.updateModalOpen,footer:r,onCancel:function(){l.onCancel()},children:f})},onFinish:l.onSubmit,children:[(0,e.jsxs)(z.L.StepForm,{initialValues:{name:l.values.name,desc:l.values.desc},title:s.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,e.jsx)(Z.Z,{name:"name",label:s.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u89C4\u5219\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"})}]}),(0,e.jsx)(R,{name:"desc",width:"md",label:s.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:s.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]}),(0,e.jsxs)(z.L.StepForm,{initialValues:{target:"0",template:"0"},title:s.formatMessage({id:"pages.searchTable.updateForm.ruleProps.title",defaultMessage:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027"}),children:[(0,e.jsx)(q.Z,{name:"target",width:"md",label:s.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,e.jsx)(q.Z,{name:"template",width:"md",label:s.formatMessage({id:"pages.searchTable.updateForm.ruleProps.templateLabel",defaultMessage:"\u89C4\u5219\u6A21\u677F"}),valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,e.jsx)(Pe.Group,{name:"type",label:s.formatMessage({id:"pages.searchTable.updateForm.ruleProps.typeLabel",defaultMessage:"\u89C4\u5219\u7C7B\u578B"}),options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,e.jsxs)(z.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:s.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.title",defaultMessage:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F"}),children:[(0,e.jsx)(je,{name:"time",width:"md",label:s.formatMessage({id:"pages.searchTable.updateForm.schedulingPeriod.timeLabel",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.schedulingPeriod.timeRules",defaultMessage:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"})}]}),(0,e.jsx)(q.Z,{name:"frequency",label:s.formatMessage({id:"pages.searchTable.updateForm.object",defaultMessage:"\u76D1\u63A7\u5BF9\u8C61"}),width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},Se=Ce,ye=["defaultRender"],Ze=function(){var n=T()(p()().mark(function l(s){var u;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=x.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,(0,y.HP)(A()({},s));case 4:return u(),x.ZP.success("Added successfully"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),u(),x.ZP.error("Adding failed, please try again!"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},l,null,[[1,9]])}));return function(s){return n.apply(this,arguments)}}(),Re=function(){var n=T()(p()().mark(function l(s){var u;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=x.ZP.loading("Configuring"),r.prev=1,r.next=4,(0,y.D7)({name:s.name,desc:s.desc,key:s.key});case 4:return u(),x.ZP.success("Configuration is successful"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),u(),x.ZP.error("Configuration failed, please try again!"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},l,null,[[1,9]])}));return function(s){return n.apply(this,arguments)}}(),Ee=function(){var n=T()(p()().mark(function l(s){var u;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=x.ZP.loading("\u6B63\u5728\u5220\u9664"),s){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,y.DV)({key:s.map(function(S){return S.key})});case 6:return u(),x.ZP.success("Deleted successfully and will refresh soon"),r.abrupt("return",!0);case 11:return r.prev=11,r.t0=r.catch(3),u(),x.ZP.error("Delete failed, please try again"),r.abrupt("return",!1);case 16:case"end":return r.stop()}},l,null,[[3,11]])}));return function(s){return n.apply(this,arguments)}}(),De=function(){var l=(0,m.useState)(!1),s=F()(l,2),u=s[0],f=s[1],r=(0,m.useState)(!1),S=F()(r,2),_=S[0],W=S[1],Le=(0,m.useState)(!1),re=F()(Le,2),se=re[0],te=re[1],E=(0,m.useRef)(),Oe=(0,m.useState)(),le=F()(Oe,2),v=le[0],U=le[1],we=(0,m.useState)([]),ne=F()(we,2),D=ne[0],oe=ne[1],H=(0,t.useIntl)(),ue=[{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"Rule name"}),dataIndex:"name",tip:"The rule name is the unique key",render:function(d,i){return(0,e.jsx)("a",{onClick:function(){U(i),te(!0)},children:d})}},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleDesc",defaultMessage:"Description"}),dataIndex:"desc",valueType:"textarea"},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleCallNo",defaultMessage:"Number of service calls"}),dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(d){return"".concat(d).concat(H.formatMessage({id:"pages.searchTable.tenThousand",defaultMessage:" \u4E07 "}))}},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleStatus",defaultMessage:"Status"}),dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.nameStatus.default",defaultMessage:"Shut down"}),status:"Default"},1:{text:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.nameStatus.running",defaultMessage:"Running"}),status:"Processing"},2:{text:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.nameStatus.online",defaultMessage:"Online"}),status:"Success"},3:{text:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.nameStatus.abnormal",defaultMessage:"Abnormal"}),status:"Error"}}},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleUpdatedAt",defaultMessage:"Last scheduled time"}),sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(d,i,P){var j=i.defaultRender,h=$()(i,ye),de=P.getFieldValue("status");return"".concat(de)==="0"?!1:"".concat(de)==="3"?(0,e.jsx)(pe.Z,A()(A()({},h),{},{placeholder:H.formatMessage({id:"pages.searchTable.exception",defaultMessage:"Please enter the reason for the exception!"})})):j(d)}},{title:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(d,i){return[(0,e.jsx)("a",{onClick:function(){W(!0),U(i)},children:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.config",defaultMessage:"Configuration"})},"config"),(0,e.jsx)("a",{href:"https://procomponents.ant.design/",children:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.subscribeAlert",defaultMessage:"Subscribe to alerts"})},"subscribeAlert")]}}];return(0,e.jsxs)(X._z,{children:[(0,e.jsx)(L.Z,{headerTitle:H.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:E,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(k.ZP,{type:"primary",onClick:function(){f(!0)},children:[(0,e.jsx)(Q.Z,{})," ",(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:y.jR,columns:ue,rowSelection:{onChange:function(d,i){oe(i)}}}),(D==null?void 0:D.length)>0&&(0,e.jsxs)(o.S,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:D.length})," ",(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,e.jsxs)("span",{children:[(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",D.reduce(function(c,d){return c+d.callNo},0)," ",(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:[(0,e.jsx)(k.ZP,{onClick:T()(p()().mark(function c(){var d,i;return p()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Ee(D);case 2:oe([]),(d=E.current)===null||d===void 0||(i=d.reloadAndRest)===null||i===void 0||i.call(d);case 4:case"end":return j.stop()}},c)})),children:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}),(0,e.jsx)(k.ZP,{type:"primary",children:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.batchApproval",defaultMessage:"Batch approval"})})]}),(0,e.jsxs)(O.Y,{title:H.formatMessage({id:"pages.searchTable.createForm.newRule",defaultMessage:"New rule"}),width:"400px",open:u,onOpenChange:f,onFinish:function(){var c=T()(p()().mark(function d(i){var P;return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Ze(i);case 2:P=h.sent,P&&(f(!1),E.current&&E.current.reload());case 4:case"end":return h.stop()}},d)}));return function(d){return c.apply(this,arguments)}}(),children:[(0,e.jsx)(Z.Z,{rules:[{required:!0,message:(0,e.jsx)(t.FormattedMessage,{id:"pages.searchTable.ruleName",defaultMessage:"Rule name is required"})}],width:"md",name:"name"}),(0,e.jsx)(R,{width:"md",name:"desc"})]}),(0,e.jsx)(Se,{onSubmit:function(){var c=T()(p()().mark(function d(i){var P;return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Re(i);case 2:P=h.sent,P&&(W(!1),U(void 0),E.current&&E.current.reload());case 4:case"end":return h.stop()}},d)}));return function(d){return c.apply(this,arguments)}}(),onCancel:function(){W(!1),se||U(void 0)},updateModalOpen:_,values:v||{}}),(0,e.jsx)(ce.Z,{width:600,open:se,onClose:function(){U(void 0),te(!1)},closable:!1,children:(v==null?void 0:v.name)&&(0,e.jsx)(I.vY,{column:2,title:v==null?void 0:v.name,request:T()(p()().mark(function c(){return p()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",{data:v||{}});case 1:case"end":return i.stop()}},c)})),params:{id:v==null?void 0:v.name},columns:ue})})]})},Ae=De}}]);
